img=/home/neau/trainset/crop_leaf/ffdc0596-20220701-crop-56-2-2_0_0_640_640-ag-0.jpg

array1=(
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-ag-mixup/yolov8-s-ag-mixup.py"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-ag-no/yolov8-s-ag-no.py"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-p5-4-16-mixup-ema-backbone/yolov8-s-p5-4-16-mixup-ema-backbone.py"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/s/yolov8-s-ms/yolov8-s-ms.py"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-ms-no-ag/yolov8-s-ms.py"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-p5-4-16-mixup-noasff/yolov8-s-p5-4-16-mixup.py"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-p5-4-16-mixup/yolov8-s-p5-4-16-mixup.py"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-ms-mixup/yolov8-s-ms.py"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-p5-4-16-mixup-ema-backbone-noaspp/yolov8-s-p5-4-16-mixup-ema-backbone-noaspp.py"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-p5-4-16-noag-ema-backbone-noaspp/yolov8-s-p5-4-16-noag-ema-backbone-noaspp.py"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-p5-4-16-noag-ema-backbone/yolov8-s-p5-4-16-noag-ema-backbone.py"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/s/yolov8-s-afpn-mixup/yolov8-s-afpn-mixup.py"
    # "/home/neau/sdb/ag-pro/leaf_model/config/yolov8/yolov8-s-p5-4-16-mixup-ema-backbone-afpn.py"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/s/yolov8-s-afpn4-mixup/yolov8-s-afpn4-mixup.py"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-head-pp/yolov8-s-head-pp.py"
    "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-m/yolov8-m.py"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-head-ca/yolov8-s-head-ca.py"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-backbone/yolov8-s-backbone.py"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-backbone-neck-ca/yolov8-s-backbone-neck-ca.py"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-backbone-neck-ca-mod/yolov8-s-backbone-neck-ca-mod.py"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-backbone-head1/yolov8-s-backbone-head1.py"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-fpan-neck/yolov8-s-fpan-neck.py"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-fpan-neck4/yolov8-s-fpan-neck4.py"
    )
array2=(
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-ag-mixup/best_coco_bbox_mAP_epoch_240.pth"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-ag-no/best_coco_bbox_mAP_epoch_80.pth"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-p5-4-16-mixup-ema-backbone/best_coco_bbox_mAP_epoch_280.pth"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/s/yolov8-s-ms/best_coco_bbox_mAP_epoch_240.pth"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-ms-no-ag/best_coco_bbox_mAP_epoch_80.pth"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-p5-4-16-mixup-noasff/best_coco_bbox_mAP_epoch_170.pth"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-p5-4-16-mixup/best_coco_bbox_mAP_epoch_270.pth"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-ms-mixup/best_coco_bbox_mAP_epoch_280.pth"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-p5-4-16-mixup-ema-backbone-noaspp/best_coco_bbox_mAP_epoch_200.pth"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-p5-4-16-noag-ema-backbone-noaspp/best_coco_bbox_mAP_epoch_130.pth"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-p5-4-16-noag-ema-backbone/best_coco_bbox_mAP_epoch_90.pth"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/s/yolov8-s-afpn-mixup/best_coco_bbox_mAP_epoch_495.pth"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-p5-4-16-mixup-ema-backbone-afpn/best_coco_bbox_mAP_epoch_280.pth"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-head-pp/best_coco_round_precision_epoch_180.pth"
    "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-m/best_coco_round_precision_epoch_120.pth"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-dcnca/best_coco_round_precision_epoch_30.pth"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-head-ca/best_coco_round_precision_epoch_200.pth"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-backbone/epoch_230.pth"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-backbone-neck-ca/best_coco_round_precision_epoch_150.pth"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-backbone-neck-ca-mod/best_coco_round_precision_epoch_200.pth"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-backbone-head1/best_coco_round_precision_epoch_190.pth"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-fpan-neck/epoch_200.pth"
    # "/home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-fpan-neck4/epoch_200.pth"
)
array3=(
    # "./output/yolov8-s-ag-mixup"
    # "./output/yolov8-s-ag-no"
    # "./output/yolov8-s-p5-4-16-mixup-ema-backbone"
    # "./output/yolov8-s-ms-8-32"
    # "./output/yolov8-s-ms-no-ag-4-16"
    # "./output/yolov8-s-p5-4-16-mixup-noasff"
    # "./output/yolov8-s-p5-4-16-mixup"
    # "./output/yolov8-s-ms-mixup-4-16"
    # "./output/yolov8-s-p5-4-16-mixup-ema-backbone-noaspp"
    # "./output/yolov8-s-p5-4-16-noag-ema-backbone-noaspp"
    # "./output/yolov8-s-p5-4-16-noag-ema-backbone"
    # "./output/yolov8-s-afpn-mixup"
    # "./output/yolov8-s-p5-4-16-mixup-ema-backbone-afpn"
    "./output/yolov8-m"
    # "./output/yolov8-s-fpan-neck"
    # "./output/yolov8-s-fpan-neck4"
    # "./output/yolov8-s-backbone-head1-8"
)

channel_reduction=select_max # select_max or squeeze_mean

length=${#array1[@]}
#  --preview-mode

for ((i=0; i<$length; i++)); do
  python /home/neau/sdb/mmyolo/demo/featmap_vis_demo.py ${img} ${array1[$i]} ${array2[$i]} --device cpu  --target-layers backbone neck --channel-reduction select_max --out-dir ${array3[$i]}-select_max
  python /home/neau/sdb/mmyolo/demo/featmap_vis_demo.py ${img} ${array1[$i]} ${array2[$i]} --device cpu  --target-layers backbone neck --channel-reduction squeeze_mean --out-dir ${array3[$i]}-squeeze_mean 
  python /home/neau/sdb/mmyolo/demo/featmap_vis_demo.py ${img} ${array1[$i]} ${array2[$i]} --device cpu  --target-layers backbone neck --channel-reduction None --topk 7 --arrangement 3 3 --out-dir ${array3[$i]}-topk
done



  # python /home/neau/sdb/mmyolo/demo/featmap_vis_demo.py /home/neau/trainset/images/d0f0ba7a-20220701-crop-0-4-0.jpg /home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s/yolov8-s.py /home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s/best_coco_bbox_mAP_epoch_498.pth --target-layers backbone neck --channel-reduction squeeze_mean --out-dir ./output/yolov8-s --device cpu 
  # python /home/neau/sdb/mmyolo/demo/featmap_vis_demo.py /home/neau/trainset/images/d0f0ba7a-20220701-crop-0-4-0.jpg /home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-ag-no/yolov8-s-ag-no.py /home/neau/sdb/ag-pro/leaf_model/work_dirs/yolov8-s-ag-no/best_coco_bbox_mAP_epoch_80.pth --target-layers backbone neck --channel-reduction squeeze_mean --out-dir ./output/yolov8-s-afpn-mixup --device cpu 
